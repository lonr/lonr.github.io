å¾ˆä¹…å‰çš„æƒ³æ³•ï¼Œåšä¸ª widget æ”¾åœ¨å¤´åƒæ—è¾¹ï¼šåŠ è½½çš„æ—¶å€™è®©æµè§ˆå™¨å›¾æ ‡ä¸€ç›´è½¬åœˆã€‚å›¾æ ‡ä¼šå¯¹åº”ä¸åŒçš„æµè§ˆå™¨å˜åŒ–

![Chrome](../assets/chrome.svg) ![Firefox](../assets/firefox.svg) ![Edge](../assets/edge.svg) ![Safari](../assets/safari.svg) ![Opera](../assets/opera.svg)

## 2023-05-14 updated

å½“åˆæƒ³æ”¾åœ¨æ–¹å½¢å¤´åƒçš„å³ä¸‹è§’ï¼Œç°åœ¨ä½¿ç”¨äº†åœ†å½¢å¤´åƒå°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚

ä¸è¯¥åš Opera çš„åŠ¨ç”»çš„ï¼Œé™¤äº†è´¹æ—¶ä¸”æ²¡ç”¨å¤–ï¼š1. æ²¡åšå¥½ï¼Œåº”è¯¥ä½¿ç”¨ä¸­å¿ƒæŠ•å½± 2. Webkit ç›®å‰è¿˜ä¸æ”¯æŒç»™è¿™æ ·çš„åŠ¨ç”»æ’å¸§ã€‚

å½“åˆæ˜¯åšæˆäº†ä¸€äº›ç»„ä»¶ [browser-logo-spinner](https://github.com/lonr/browser-logo-spinner)ï¼Œä½¿ç”¨äº† API è®©åŠ¨ç”»åœæ­¢å‰è½¬å®Œå½“å‰å‘¨æœŸååœæ­¢è€Œä¸æ˜¯åå‘è½¬åœˆã€‚è¿™é‡Œæ²¡å†™ä¸‹æ¥ã€‚

## æµè§ˆå™¨è¯†åˆ«

å„æµè§ˆå™¨ user agent å­—ç¬¦ä¸²

- Firefox: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox
- Chrome: https://developer.chrome.com/multidevice/user-agent
- Opera: https://help.opera.com/en/opera-version-history/
- Edge: https://docs.microsoft.com/en-us/microsoft-edge/web-platform/user-agent-string

å¦å¤–å‚è€ƒ [ngx-device-detector](https://github.com/KoderLabs/ngx-device-detector/blob/d17661840b46e13e501c7604214f7fde10813859/src/device-detector.constants.ts#L452-L477)ï¼Œæ³¨æ„åˆ°ï¼š

1. Chrome çš„ UA é‡Œæœ‰â€œSafariâ€ã€‚åŸºäº Chromium çš„æµè§ˆå™¨æ—¢æœ‰â€œChromeâ€åˆæœ‰â€œSafariâ€ï¼Œæ¯”å¦‚ Edge å’Œ Opera
2. Chromeã€Firefox å’Œè€ Edge çš„ iOS ç‰ˆæœ¬æœ‰ä¸“é—¨çš„åç§°
3. ä¸èƒ½ä» UA åŒºåˆ† Chromeã€Chromium æˆ–è€… Stableã€Devã€Canaryã€‚ï¼ˆOpera å¥½åƒå¯ä»¥ï¼‰

```ts
function getBrowserName(): String {
  const ua = navigator.userAgent;
  switch (true) {
    case /\bFirefox\b|\bFxiOS\b/.test(ua):
      return 'Firefox';
    case /\bOPR\b/.test(ua):
      return 'Opera';
    case /\bEdg\b/.test(ua):
      return 'Edge';
    case /\bWindows Phone\b|\bSamsungBrowser\b|\bUCBrowser\b/.test(ua):
      return 'Other';
    case /\bChrome\b|\bCriOS\b|\bHeadlessChrome\b/.test(ua):
      return 'Chrome';
    case /\bSafari\b/.test(ua):
      return 'Safari';
    default:
      return 'Other';
  }
}
```

å¦å¤– UA å­—ç¬¦ä¸²[å°†è¢«å†»ç»“](https://github.com/WICG/ua-client-hints)

## è®©å›¾æ ‡è½¬èµ·æ¥

- [Browser Logos](https://github.com/alrra/browser-logos) æœ‰å¾ˆå¤šæµè§ˆå™¨å›¾æ ‡ï¼Œæœ‰äº›æœ‰ SVG ç‰ˆæœ¬
- [ç«ç‹ logo](https://mozilla.design/firefox/logos-usage/)

```css
@keyframes rotating {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

#logo {
  animation: rotating 3s linear infinite;
}
```

è¿™æ ·å›¾æ ‡å°±é¡ºæ—¶é’ˆä¸€ç›´æ—‹è½¬äº†ã€‚å½“åŠ è½½å®Œèµ„æºéœ€è¦è®©æ—‹è½¬åœä¸‹æ¥ï¼Œä½†æ€ä¹ˆè®©å®ƒåœåœ¨åˆå§‹ä½ç½®å‘¢ï¼Ÿ

Aï¼šä¸ç«‹å³è®©åŠ¨ç”»åœä¸‹æ¥ï¼Œç›‘å¬ `animationiteration` äº‹ä»¶è®©å®ƒåœ¨è¿™æ¬¡å¾ªç¯ç»“æŸæ—¶åœä¸‹æ¥ï¼ˆä¹Ÿå¯ä»¥è®¾ç½®è®©å®ƒå†å¤šè½¬å‡ åœˆï¼‰

## æ—‹è½¬éƒ¨åˆ† SVG

ç®€å•åœ°æ—‹è½¬æ•´ä¸ªå›¾ç‰‡ä¼šæœ‰ä¸€äº›é—®é¢˜

1. Safari çš„å›¾æ ‡å› ä¸ºæœ‰æ¸å˜æ‰€ä»¥æ—‹è½¬æ•´ä¸ªå›¾æ ‡ä¸å¥½çœ‹

   - åªè®©æŒ‡é’ˆè½¬
   - Safari çš„ SVG æŒ‡é’ˆåœ¨åˆ»åº¦ä¸‹é¢ï¼Œç§»åŠ¨ä¸‹èŠ‚ç‚¹å°±å¥½äº†

2. Firefox ~~çš„ ğŸŒï¸ ä¸åœ¨æ­£ä¸­å¤®~~ï¼ˆå…¶å®æ˜¯åœ¨ä¸­é—´çš„ï¼‰ï¼Œè€Œä¸”ä¹Ÿæœ‰æ¸å˜

   - åªè®© ğŸ¦Š è½¬

3. Opera è½¬èµ·æ¥åƒçŸ¢é‡å‘åŠ¨æœºä¸€æ ·

   - æ— èƒ½ä¸ºåŠ›ã€‚è®©å®ƒæ²¿ y è½´è½¬åŠ¨åº”è¯¥å¥½ç‚¹~~ï¼Œä¸ä¼š~~

4. Chrome é€†æ—¶é’ˆè½¬æ¯”è¾ƒå¥½

éœ€è¦è®© SVG çš„ä¸€éƒ¨åˆ†è½¬èµ·æ¥ï¼Œå¯ä»¥ä½¿ç”¨ CSSï¼Œä½† CSS ä¸èƒ½ä½œç”¨äº `<img>` é“¾æ¥çš„ SVGã€‚CSSã€JS å¯ä»¥å†…è”åœ¨ SVG é‡Œé¢ï¼ŒSVG ä¹Ÿå¯ä»¥å†…è”åœ¨ HTML é‡Œã€‚å¹²è„†è®© SVG æ¥æ”¶äº‹ä»¶è‡ªå·±å†³å®šæ€ä¹ˆåŠ¨å§

## è®© ğŸ¦Š è½¬èµ·æ¥ï¼ˆç®€å•åœ°ä¿®æ”¹ä¸‹ SVGï¼‰

- Firefox çš„ ğŸŒï¸ ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„åœ†ï¼Œä¸”å’Œæœ€åº•å±‚é‡å ã€‚è¡¥å…¨åœ†æ”¾åˆ°æœ€åº•å±‚ï¼ŒæŠŠåŸæ¥çš„æœ€åº•å±‚ path æ¢æˆä¸ä¸åœ†é‡å çš„ï¼ˆåˆšå¥½æœ‰ä¸€ä¸ª ğŸ˜„ï¸ï¼‰å¹¶æ”¾åˆ°ä¸Šé¢ï¼Œå’Œå‰©ä¸‹çš„æ”¾åˆ° `<g>` é‡Œä¸€èµ·åŠ¨
- å¦å¤–åœ°çƒçš„æ¸å˜çš„ä½ç½®å˜äº†ï¼ˆå› ä¸ºå¤§å°å˜äº†ï¼‰ï¼Œè¿‘ä¼¼å¤åŸä¸‹
- æœ‰å‡ ä¸ªä¸€æ ·çš„ pathï¼Œå¯ä»¥ç”¨ `use` å¤ç”¨ä¸‹

## å°è¯•è®© Opera è½¬èµ·æ¥ï¼ˆ`d: path()` åŠ¨ç”»ï¼‰

Opera å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå®½å¾ˆè–„çš„â€œæˆ’æŒ‡â€ï¼š

- Opera logo [å®˜æ–¹å®£ä¼ è§†é¢‘](https://youtu.be/KvJJk5Z-iZE?t=13)ã€[å¦ä¸€ä¸ª](https://youtu.be/1TGppf6GzPQ?t=7)
- è¿™é‡Œæœ‰ä¸ª[å‚è€ƒ](https://www.behance.net/gallery/69964021/OPERA-MINI-LOGO-3D)ï¼‰

CSS åŠ¨ç”»å¯ä»¥ä½¿ç”¨ SVG çš„ [d å±æ€§](https://svgwg.org/svg2-draft/paths.html#TheDProperty)ï¼Œæµè§ˆå™¨ä¼šæ’å¸§ã€‚ä¸€äº›ä¾‹å­ï¼š

- https://www.bram.us/2017/06/21/changing-svg-path-data-with-css/
- https://stackoverflow.com/questions/46454102/css-d-path-attribute-doesnt-work-in-safari-firefox
- https://www.sarasoueidan.com/blog/animating-css-shapes/

æœ‰å¾ˆå¤š ğŸ’ï¸ çš„ Blender æ•™å­¦è§†é¢‘ï¼Œè·Ÿç€ç³Šäº†ä¸€ä¸ªã€‚æœŸæœ›èƒ½æˆªä¸€äº›è§’åº¦çš„å›¾åšå…³é”®å¸§

ç”¨ Inkscape æä¸€äº›å¸§ï¼ˆ1/4ï¼Ÿï¼‰ã€‚è‡³å°‘éœ€è¦ 8 å¸§ï¼ˆä¸€å¸§æœ‰ä¸¤éƒ¨åˆ†ï¼‰ï¼Œè§†æ•ˆæœå¢åŠ 

è¦æƒ³ä½¿ç”¨ Inkscape é‡Œå›¾å½¢çš„ d path å±æ€§ï¼Œæœ€å¥½ Node çš„æ•°é‡ä¸€è‡´ï¼Œä¸ç„¶å¯èƒ½ä¸ä¼šæ’å¸§ã€‚æ‰€ä»¥ï¼ˆä¼¼ä¹ï¼‰ï¼š

1. æœ€ç®€å•çš„å›¾å½¢å’Œæœ€å¤æ‚çš„å›¾å½¢è¦æœ‰ä¸€æ ·å¤šçš„â€œç‚¹â€ï¼Œä¸”é¡ºåºä¸€è‡´ï¼Œå¦è¦æ³¨æ„å„å¸§å„ç‚¹å¯¹åº”ä½ç½®ã€‚ï¼ˆæ‰€ä»¥ Inkscape é‡Œä»¥ä¸€å¸§ä¸ºåŸºç¡€ä¿®æ”¹ï¼‰
2. å·²çŸ¥ä¸€æ¡çº¿ä»ç›´çº¿ï¼ˆLineToï¼‰åˆ°æ›²çº¿ï¼ˆBÃ©zier Curveï¼‰ä¸ä¼šæ’å¸§ï¼Œè¿™æ ·è¦ä¿è¯ path é‡Œæ¯ä¸ªç‚¹æ˜¯é€šè¿‡ BÃ©zier æ›²çº¿è¿æ¥çš„ï¼ˆInkscape ä¼šâ€œä¼˜åŒ–â€ç›´çº¿ BÃ©zier Curve åˆ° LineToï¼‰
3. å› ä¸ºæ˜¯æ’å¸§ï¼Œå¯¹ç´§è´´ç€çš„ä¸¤éƒ¨åˆ†ï¼Œä¸­é—´å¸§å¯èƒ½ä¼šäº§ç”Ÿç©ºéš™ã€‚éœ€è¦è®©ä¸¤éƒ¨åˆ†é‡å ä¸€äº›

---

ä¸€å…±æäº†åå‡ å¸§ï¼ŒåŸºæœ¬å®Œæˆã€‚æ²¡æƒ³åˆ° â­•ï¸ï¸ ä¸­é—´çš„æ¤­åœ†å¹¶ä¸æ˜¯é—®é¢˜ï¼Œå€’æ˜¯å› ä¸ºæ¨¡å‹åšçš„å’Œ logo æœ‰å‡ºå…¥ï¼ˆå¤ªè–„äº†ï¼Ÿï¼‰ï¼Œæ‰€ä»¥ logo å‰åå˜åŒ–æœ‰äº›çªå…€ï¼ˆä¹Ÿå¯ä»¥æ¢æˆå˜å½¢çš„ logoï¼Œ~~ç®—äº†~~ï¼‰

---

[åˆç³Šäº†ä¸€ä¸ª](https://rxjs-msnz6a.stackblitz.io/)ï¼Œå¥½å¤šäº†ã€‚å‘ç°è¿™åŠ¨ç”»å ç”¨å¥½å¤š CPU ğŸ˜­ï¸

## åŠ¨ç”»å¾ªç¯

å®Œæˆäº†ä»æ­£é¢ï¼ˆâ­•ï¸ï¸0Â°ï¼‰åˆ°ä¾§é¢ï¼ˆ|90Â°ï¼‰ï¼Œå¦ä¸€åŠåˆšå¥½æ˜¯é•œåƒï¼ˆ90Â°-180Â° å¯¹åº” 90Â°-0Â°ï¼‰

1. åˆ†åˆ«è®¾ç½®ä¸¤éƒ¨åˆ† `animation-direction: alternate;`ï¼Œè®©åŠ¨ç”»åœ¨ä¸€æ¬¡å¾ªç¯ç»“æŸåå€’æ”¾
2. ç”¨ `<g>` æŠŠä¸¤éƒ¨åˆ†æ¡†èµ·æ¥ï¼Œè®¾ç½®åŠ¨ç”»ï¼šæ¯æ—‹è½¬ 90Â° åé•œåƒè‡ªå·±

ä½¿ç”¨ `transform: scale(-1, 1);` æ¥é•œåƒ SVGï¼š

```css
@keyframes switch {
  0%: {
    transform: scale(1, 1);
  }
  49.99% {
    transform: scale(1, 1);
  }
  50% {
    transform: scale(-1, 1);
  }
  99.99% {
    transform: scale(-1, 1);
  }
  100% {
    transform: scale(1, 1);
  }
}
g#ring {
  transform-origin: center;
  animation-name: switch;
  animation-duration: 2s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}
```

å‘ç°ä¹Ÿå¯ä»¥ä½¿ç”¨ `steps()` å®ç°ï¼ˆå‘ç°è¿™æ ·æ²¡æœ‰ç¬¬ä¸€æ¬¡é•œåƒæ—¶çš„é—ªçƒ ğŸ˜¸ï¸ï¼‰ï¼š

```css
@keyframes switch {
  0%: {
    transform: scale(1, 1);
  }
  100% {
    transform: scale(-1, 1);
  }
}
g#ring {
  transform-origin: center;
  animation-name: switch;
  animation-duration: 2s;
  animation-timing-function: steps(2, jump-none);
  animation-iteration-count: infinite;
}
```

å‘ç°å¯ä»¥æŒ‡å®šå¤šä¸ªåŠ¨ç”»ï¼Œæ‰€ä»¥ `<g>` å¯ä»¥å»æ‰ï¼š

```css
path#rightPart {
  transform-origin: center;
  animation-name: right, switch;
  animation-duration: 1s, 2s;
  animation-timing-function: linear, steps(2, jump-none);
  animation-iteration-count: infinite;
  animation-direction: alternate, normal;
}
```

---

éœ€è¦ä» Opera logo å¼€å§‹æ—‹è½¬ã€‚è²Œä¼¼å¯ä»¥ä½¿ç”¨è´Ÿå€¼ `animation-delay` ä» `@keyframes` çš„ä¸­é—´å¼€å§‹ï¼Œä½†è¿˜éœ€è¦è®©åŠ¨ç”»å¾ªç¯åœæ­¢åœ¨ logo é‚£å¸§~~ï¼Œè¿˜æ˜¯è°ƒæ•´ `@keyframes` å§ã€‚å¦å¤–å¯ä»¥ç”¨ `animation-delay` ä½¿é•œåƒå¾ªç¯ä¸ä¹‹åŒ¹é…~~

å‘ç°å› ä¸ºä½¿ç”¨äº† `animation-direction: alternate`ï¼Œä¸èƒ½è°ƒæ•´ `@keyframes` ä» logo é‚£å¸§å¼€å§‹ï¼ˆç»“æŸï¼‰ï¼ˆï¼Œè¿™æ ·ä¹Ÿæ²¡åŠæ³•åˆ©ç”¨ `<path d="">` åšç¬¬ä¸€å¸§ä»è€Œå°‘å†™ä¸€ä¸ª `d: path('')`ï¼‰ã€‚ç›‘å¬äº‹ä»¶è®©åŠ¨ç”»åœ¨ä¸­é—´æš‚åœå¥½äº†

æœ€å `animation` ç¼©å†™ä¸‹ï¼š

```css
#leftPart {
  transform-origin: center;
  animation: 1s linear -0.38s infinite alternate left, 2s steps(2, jump-none) -0.38s infinite switch;
}
#rightPart {
  transform-origin: center;
  animation: 1s linear -0.38s infinite alternate right, 2s steps(2, jump-none) -0.38s infinite
      switch;
}
```

## SVG æ³¨å…¥

å‚è€ƒï¼š

1. https://github.com/arkon/ng-inline-svg/
2. https://github.com/iconic/SVGInjector/blob/master/svg-injector.js

## Inkscape

æƒ³è¦æµè§ˆå™¨æ­£ç¡®æ’å¸§å¾—ä¿è¯ä¸¤ä¸ª Path çš„ Nodes æ•°é‡å’Œé¡ºåºä¸€è‡´ï¼ŒInkscape ä¸€ç•ªæ“ä½œåç”Ÿæˆçš„ XML å¯èƒ½å’ŒåŸæ¥ Path çš„ Nodes å¯¹ä¸ä¸Šäº†ã€‚æ¯”å¦‚åº”ç”¨äº†é•œåƒå¯¹ç§°æ•ˆæœå°±å¯èƒ½äº§ç”Ÿå¤šä½™èŠ‚ç‚¹ä¸”æ”¹å˜äº†èµ·å§‹ Node å’Œé¡ºåºã€‚å¤šä½™èŠ‚ç‚¹å¯ä»¥æ‰‹åŠ¨åˆå¹¶ï¼Œé¡ºåºåº”è¯¥å¯ä»¥é€šè¿‡â€œæ–­å¼€ã€å†æ·»åŠ â€â€œä¿®æ”¹â€ã€‚å¦å¤– Number Nodes å¯ä»¥æ˜¾ç¤º Nodes æ•°é‡å’Œé¡ºåº

å†™äº†ä¸€ä¸ªé‡æ–°æŒ‡å®šèµ·ç‚¹çš„è„šæœ¬ï¼ˆè™½ç„¶ä»…èƒ½å¤„ç†ç»å¯¹è·ç¦»ã€æ›²çº¿ `C` æŒ‡ä»¤ï¼‰

```js
class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }

  toString() {
    return this.x + ',' + this.y;
  }

  equals(p) {
    if (this.x === p.x && this.y === p.y) {
      return true;
    }
    return false;
  }
}

class Node {
  constructor(prev, startHandle, endHandle, endPoint, next) {
    this.prev = prev;
    this.startHandle = startHandle;
    this.endHandle = endHandle;
    this.endPoint = endPoint;
    this.next = next;
  }

  get startPoint() {
    return this.prev.endPoint;
  }
  // endPoint remains
  partiallyReverse() {
    let tempPointer = this.prev;
    this.prev = this.next;
    this.next = tempPointer;
    tempPointer = this.startHandle;
    this.startHandle = this.endHandle;
    this.endHandle = tempPointer;
  }

  toString() {
    return `${this.startHandle} ${this.endHandle} ${this.endPoint}`;
  }
}

class Path {
  constructor(first, length) {
    this.first = first;
    this.length = length;
  }

  static fromString(s) {
    let first;
    let prev = null;
    let curr = null;
    let words = s.split(/\s|,/);
    let index = 0;
    let length = 0;
    while (index < words.length) {
      if (words[index].toUpperCase() === 'Z') {
        break;
      }
      if (words[index] === 'M') {
        index += 2;
      } else if (words[index] === 'C') {
      } else {
        let x1 = Number(words[index]);
        index += 1;
        let y1 = Number(words[index]);
        index += 1;
        let x2 = Number(words[index]);
        index += 1;
        let y2 = Number(words[index]);
        index += 1;
        let x = Number(words[index]);
        index += 1;
        let y = Number(words[index]);
        curr = new Node(prev, new Point(x1, y1), new Point(x2, y2), new Point(x, y), null);
        if (!first) {
          first = curr;
        }
        if (curr.prev) {
          curr.prev.next = curr;
        }
        prev = curr;
        length += 1;
      }

      index += 1;
    }
    first.prev = prev;
    prev.next = first;

    return new Path(first, length);
  }

  reverse() {
    let curr = this.first.prev;
    let endPoint = curr.endPoint;
    for (let i = 0; i < this.length - 1; i += 1) {
      curr.partiallyReverse();
      // fix endPoints
      curr.endPoint = curr.next.endPoint;
      curr = curr.next;
    }
    curr.partiallyReverse();
    curr.endPoint = endPoint;
  }

  reorder(startPoint, endPoint) {
    let curr = this.first;
    for (let i = 0; i < this.length; i += 1) {
      if (curr.startPoint.equals(startPoint) && curr.endPoint.equals(endPoint)) {
        this.first = curr;
        return this;
      }
      if (curr.startPoint.equals(endPoint) && curr.endPoint.equals(startPoint)) {
        this.first = curr;
        this.reverse();
        return this;
      }
      curr = curr.next;
    }
  }

  toString() {
    let curr = this.first;
    let s = `M ${curr.startPoint.x} ${curr.startPoint.y} C `;
    for (let i = 0; i < this.length; i += 1) {
      s += curr + ' ';
      curr = curr.next;
    }
    s += 'Z';
    return s;
  }
}
```

## åè®°

- Gnome å¸¦çš„å›¾ç‰‡æµè§ˆå™¨ï¼ˆSushi æ‰“å¼€çš„ï¼‰é¢„è§ˆ SVG å†…å­˜æ³„æ¼
- Inkscape æ‰“å¼€çš„ç«ç‹å›¾æ ‡å’Œå…¶ä»–è½¯ä»¶æ˜¾ç¤ºæœ‰åŒºåˆ«ï¼ˆæ¸å˜é¢œè‰²ï¼Ÿï¼‰
- Inkscape å´©æºƒäº†å¥½å¤šæ¬¡
- Blender æœ‰ Free Style SVG Exporterï¼Œä½†ç”¨ä¸åˆ°
- æ¨é€äº† Inkscape 1.0ï¼Œæ–°ç‰ˆæœ¬è¿ç§»åˆ° GTK+3 äº†ï¼ˆGIMP è¿˜æ²¡ï¼‰
